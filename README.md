# M11405501_FinalExam

```mermaid
erDiagram
    %% ---------------------------------------------------------
    %% 1. 地區 (Region)
    %% 用於功能 3：選擇地區以顯示子區域統計
    %% ---------------------------------------------------------
    Region {
        int id PK 
        string name 
    }

    %% ---------------------------------------------------------
    %% 2. 子區域 (SubRegion)
    %% 用於功能 2：選擇子區域顯示國家排行
    %% 用於功能 3：聚合計算該區域的最大 SRB
    %% ---------------------------------------------------------
    SubRegion {
        int id PK
        int region_id FK 
        string name 
    }

    %% ---------------------------------------------------------
    %% 3. 中間區域 (Intermediate_Region) - 選用層級
    %% 如果資料來源包含此層級 (如 UN M49)，需加入此表
    %% ---------------------------------------------------------
    Intermediate_Region {
        int id PK 
        int sub_region_id FK 
        string name 
    }

    %% ---------------------------------------------------------
    %% 4. 國家 (Country)
    %% 用於功能 1：下拉選擇國家顯示歷年數據
    %% 用於功能 4：關鍵字搜尋國家名稱
    %% ---------------------------------------------------------
    Country {
        int id PK
        int intermediate_region_id FK 
        string name 
        string iso_code 
    }

    %% ---------------------------------------------------------
    %% 5. 出生性別比數據 (SRB_Data)
    %% 核心數據表，支援所有 SRB 數值的顯示與 CRUD 操作
    %% 功能 5 (新增下一年), 功能 6 (更新), 功能 7 (範圍刪除)
    %% ---------------------------------------------------------
    SRB_Data {
        int id PK "主鍵"
        int country_id FK 
        int year 
        float srb_value 
        datetime updated_at 
    }

    %% ---------------------------------------------------------
    %% 關係定義 (Relationships)
    %% ---------------------------------------------------------
    Region ||--|{ SubRegion 
    SubRegion ||--o{ Intermediate_Region
    Intermediate_Region ||--|{ Country
    Country ||--o{ SRB_Data
```